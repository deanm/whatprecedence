(function(exports){/*
 (c) 2014 dean@gmail.com http://github.com/deanm/omgc */
function l(){throw"error, invalid led call";}function n(){throw"error, invalid nud call";}function p(d,b,c,f){return{a:"op_b",e:d,l:b,d:f,i:0===b?l:function(c,a){this.c=b;this.b=c;this.g=a.f(b+("right"===f?0.1:0));return this},j:0===c?n:function(b){this.a="op_u";this.c=c;this.d="right";this.b=b.f(c);return this}}}function r(d,b,c,f){return{a:"num",q:d,b:b,t:c,s:f,i:l,j:function(){return this}}}function s(d){return{a:"sym",b:d,i:l,j:function(){return this}}}
function t(d,b,c){return r("int",d,b,c)}function u(d){return{a:"op_b_typecast",c:3,d:"right",i:l,j:function(b){this.b=s(d);this.g=b.f(3.1);return this}}}function v(d,b){return function(c){return p(c,d,b,"left")}}function w(d,b){return function(c){return p(c,d,b,"right")}}function x(d){return function(b){return{a:"op_u",e:b,l:d,i:function(b){this.a+="_s";this.c=d;this.d="left";this.b=b;return this},j:function(b){this.d="right";this.c=3;this.b=b.f(3);return this}}}}var y={};
function z(){return function(){return y}}
var A={" ":z(),"\t":z(),"\r":z(),"\n":z(),"++":x(1),"--":x(2),".":v(2,0),"->":v(2,0),"!":w(0,3),"~":w(0,3),"*":v(5,3),"/":v(5,0),"%":v(5,0),"+":v(6,3),"-":v(6,3),"<<":v(7,0),">>":v(7,0),"<=":v(8,0),">=":v(8,0),"==":v(9,0),"!=":v(9,0),"&":v(10,3),"^":v(11,0),"|":v(12,0),"&&":v(13,0),"||":v(14,0),"=":w(16,0),"+=":w(16,0),"-=":w(16,0),"*=":w(16,0),"/=":w(16,0),"%=":w(16,0),"<<=":w(16,0),">>=":w(16,0),"&=":w(16,0),"^=":w(16,0),"|=":w(16,0),",":v(18,0)},B=/^[uU](?:ll|LL)|^[uU][lL]?|^(?:ll|LL)[uU]?|^[lL][uU]?/,C=
[/^(?:[0-9]*\.[0-9]+|[0-9]+\.)(?:[eE][+-]?[0-9]+)?|^[0-9]+[eE][+-]?[0-9]+/,/^[fFlL]/,parseFloat,function(d,b,c){return r("flt",d,b,c)},/^0[xX][0-9a-fA-F]+/,B,function(d){return parseInt(d,16)},t,/^0[0-7]*/,B,function(d){return parseInt(d,8)},t,/^[1-9][0-9]*/,B,function(d){return parseInt(d,10)},t,/^[a-zA-Z_][a-zA-Z0-9_]*/,null,null,s],D=["signed","unsigned","short","long"],E="bool;char;int;float;double;void;wchar_t;char16_t;char32_t;_Bool;float_t;double_t;int8_t, uint8_t;int16_t, uint16_t;int32_t, uint32_t;int64_t, uint64_t;intptr_t, uintptr_t;size_t;ssize_t;ptrdiff_t".split(";");
function F(d){function b(){if(f>=g)throw"Unexpected end of input";for(var a,h=d.substr(f),k=3,e=C.length;k<e;k+=4)if(null!==(a=h.match(C[k-3]))){var m=C[k-2],e=C[k-1],k=C[k],h=a[0];f+=h.length;e=null!==e?e(h):h;if(null===m)return"sizeof"===e?p(e,0,3,"right"):k(e);var q="";null!==(a=d.substr(f).match(m))&&(q=a[0],f+=q.length);return k(e,q,h+q)}for(a=3;0<a;--a)if(f+a<=g&&(m=d.substr(f,a),k=A[m],void 0!==k))return f+=a,k(m);switch(m){case ")":case "]":return++f,{a:m};case "(":++f;if((a=c())&&"sym"===
a.a&&(-1!==D.indexOf(a.b)||-1!==E.indexOf(a.b))){a=[];for(k=m=!1;;)if(h=b(),h!==y){if(")"===h.a)break;if("op_b"===h.a&&"*"===h.e){if(!1===k)throw"* in typecast before any type";a.push("*");m=!0}else if("sym"===h.a&&-1!==D.indexOf(h.b)){if(!0===k)throw"Typecast qualifier after a type";if(!0===m)throw"Typecast qualifier after a *";a.push(h.b);seen_qualifier=!0}else if("sym"===h.a&&-1!==E.indexOf(h.b)){if(!0===k)throw"Typecast type after another type";if(!0===m)throw"Typecast type after a *";a.push(h.b);
k=!0}else throw"Unexpected non-typey symbol in typecast: "+h.a;}return u(a.join(" "))}return{a:"_paren",l:2,i:function(a,b){var c=null;")"!==b.h.a&&(c=b.f(20));if(")"!==b.k())throw"Unmatched left parenthesis";return{a:"fun",l:2,c:2,d:"left",b:a,g:c}},j:function(a){if(")"===a.h.a)throw"Empty parentheses expression";var b=a.f(20);if(")"!==a.k())throw"Unmatched left parenthesis";return b}};case "[":return++f,{a:"op_b[]",l:2,d:"left",i:function(a,b){this.c=2;if("]"===b.h.a)throw"Empty subscript";var c=
b.f(20);if("]"!==b.k())throw"Unmatched left bracket";this.b=a;this.g=c;return this},j:n};case ":":return++f,{a:":"};case "?":return++f,{a:"op_t",e:"?:",d:"right",l:15,i:function(a,b){this.c=15;this.b=a;this.o=b.f(15.1);if(":"!==b.k())throw"Unmatched : for ?.";this.g=b.f(15.1);return this},j:n}}throw"Failed in lexing input: "+d.substr(f);}function c(){for(var a=f;f<g;){var c=b();if(c!==y)return f=a,c}f=a;return null}var f=0,g=d.length;this.n=function(){for(;f<g;){var a=b();if(a!==y)return a}return null}}
function G(d){var b={l:20,a:"end"};this.h=b;this.m=function(){return this.h===b};this.k=function(){var c=this.h.a,f=d.n();this.h=null===f?b:f;return c};this.f=function(b){if(this.m())return null;var d=this.h;this.k();for(var g=d.j(this);b>this.h.l;)d=this.h,this.k(),g=d.i(g,this);return g};this.k()}function H(d){d=new G(d);var b=d.f(19);if(!d.m())throw"Trailing token: "+d.h.a;return b}try{exports.CLexer=F,exports.build_ast=H}catch(I){};/*
 (c) 2014 dean@gmail.com http://github.com/deanm/omgc */
function J(d,b,c,f,g,a){function h(){-1!==m&&a.push({type:"",text:"(",opt:0===m})}function k(){-1!==m&&a.push({type:"",text:")",opt:0===m})}if(null===c)throw"Operator missing operand?";var e=c.a,m=g.r(d,b,c,f);++d;switch(e){case "num":f=c.s;b="flt"===c.q?"floating point number":"integer number";a.push({type:"num",desc:b,text:f});break;case "sym":a.push({type:"sym",desc:"identifier",text:c.b});break;case "fun":e=[null,null,null,null];b="binary operator function call";var q={type:"op_u",text:"(",desc:b,
p:e};b={type:"op_u",text:")",desc:b,p:e};h();e[0]=a.length;f=J(d,"left",c.b,c,g,a);e[1]=a.length;a.push(q);e[2]=a.length;null!==c.g&&J(d,"fun",c.g,c,g,a);e[3]=a.length;a.push(b);k();break;case "op_b[]":h();e=[null,null,null,null];b="binary operator subscript";q={type:"op_u",text:"[",desc:b,p:e};b={type:"op_u",text:"]",desc:b,p:e};e[0]=a.length;f=J(d,"left",c.b,c,g,a);e[1]=a.length;a.push(q);e[2]=a.length;J(d,"subscript",c.g,c,g,a);e[3]=a.length;a.push(b);k();break;case "op_b_typecast":h();e=[null,
null,null,null];b="binary operator typecast";q={type:"op_u",text:"(",desc:b,p:e};b={type:"op_u",text:")",desc:b,p:e};a.push(q);e[0]=a.length;f=J(d,"left",c.b,c,g,a);e[1]=a.length;a.push(b);e[2]=a.length;J(d,"typecast",c.g,c,g,a);e[3]=a.length;k();break;case "op_u":case "op_u_s":b=c.d+" associative "+("op_u"===e?"prefix":"postfix")+" unary operator "+c.e;f=c.e;"sizeof"===f&&(f+=" ");b={type:e,text:f,desc:b,p:[null,null]};h();"op_u"===e&&a.push(b);b.p[0]=a.length;J(d,"op_u"===e?"right":"left",c.b,c,
g,a);b.p[1]=a.length;"op_u_s"===e&&a.push(b);k();break;case "op_b":b=c.d+" associative binary operator "+c.e;h();f=e=" ";if("."===c.e||"->"===c.e)e=f="";","===c.e&&(e="");b={type:"op_b",text:e+c.e+f,desc:b,p:[null,null,null,null]};b.p[0]=a.length;J(d,"left",c.b,c,g,a);b.p[1]=a.length;a.push(b);b.p[2]=a.length;J(d,"right",c.g,c,g,a);b.p[3]=a.length;k();break;case "op_t":b="right associative ternary operator ?:";e=[null,null,null,null,null,null];q={type:"op_t",text:" ? ",desc:b,p:e};b={type:"op_t",
text:" : ",desc:b,p:e};h();e[0]=a.length;J(d,"left",c.b,c,g,a);e[1]=a.length;a.push(q);e[2]=a.length;J(d,"middle",c.o,c,g,a);e[3]=a.length;a.push(b);e[4]=a.length;J(d,"right",c.g,c,g,a);e[5]=a.length;k();break;default:throw"Internal error, unhandled node: "+c.a;}}function K(d){var b=[];J(0,"root",d,null,{r:function(b,d,g,a){return"fun"===d||0===b?-1:"subscript"===d?0:"op_b"===a.a&&","===a.e?-1:g.c<a.c||"right"===d&&"right"===a.d&&g.c<=a.c||"left"===d&&"left"===a.d&&g.c<=a.c?0:1}},b);return b}
try{exports.generate_blocks=K}catch(L){};})(window)
