(function(exports){/*
 (c) 2014 dean@gmail.com http://github.com/deanm/omgc */
var l=20;function n(){throw"error, invalid led call";}function p(){throw"error, invalid nud call";}function r(e,b,d,c){return{a:"op_b",f:e,i:b,d:c,g:0===b?n:function(d,a){this.b=b;this.left=d;this.right=a.e(b+("right"===c?0.1:0),a);return this},h:0===d?p:function(b){this.a="op_u";this.b=d;this.d="right";this.left=b.e(d,b);return this}}}function s(e,b,d,c){return{a:"num",m:e,left:b,q:d,o:c,g:n,h:function(){return this}}}function t(e){return{a:"sym",left:e,g:n,h:function(){return this}}}
function u(e,b,d){return s("int",e,b,d)}function v(e){return{a:"op_b_typecast",b:3,d:"right",g:n,h:function(b){this.left=t(e);this.right=b.e(3.1,b);return this}}}function w(e,b){return function(d){return r(d,e,b,"left")}}function x(e,b){return function(d){return r(d,e,b,"right")}}function y(e){return function(b){return{a:"op_u",f:b,i:e,g:function(b){this.a+="_s";this.b=e;this.d="left";this.left=b;return this},h:function(b){this.d="right";this.b=3;this.left=b.e(3,b);return this}}}}var z={};
function A(){return function(){return z}}
var B={" ":A(),"\t":A(),"\r":A(),"\n":A(),"++":y(1),"--":y(2),".":w(2,0),"->":w(2,0),"!":x(0,3),"~":x(0,3),"*":w(5,3),"/":w(5,0),"%":w(5,0),"+":w(6,3),"-":w(6,3),"<<":w(7,0),">>":w(7,0),"<=":w(8,0),">=":w(8,0),"==":w(9,0),"!=":w(9,0),"&":w(10,3),"^":w(11,0),"|":w(12,0),"&&":w(13,0),"||":w(14,0),"=":x(16,0),"+=":x(16,0),"-=":x(16,0),"*=":x(16,0),"/=":x(16,0),"%=":x(16,0),"<<=":x(16,0),">>=":x(16,0),"&=":x(16,0),"^=":x(16,0),"|=":x(16,0),",":x(18,0)},C=/^[uU](?:ll|LL)|^[uU][lL]?|^(?:ll|LL)[uU]?|^[lL][uU]?/,D=
[/^(?:[0-9]*\.[0-9]+|[0-9]+\.)(?:[eE][+-]?[0-9]+)?|^[0-9]+[eE][+-]?[0-9]+/,/^[fFlL]/,parseFloat,function(e,b,d){return s("flt",e,b,d)},/^0[xX][0-9a-fA-F]+/,C,function(e){return parseInt(e,16)},u,/^0[0-7]*/,C,function(e){return parseInt(e,8)},u,/^[1-9][0-9]*/,C,function(e){return parseInt(e,10)},u,/^[a-zA-Z_][a-zA-Z0-9_]*/,null,null,t],E=["signed","unsigned","short","long"],F="bool;char;int;float;double;wchar_t;char16_t;char32_t;_Bool;float_t;double_t;int8_t, uint8_t;int16_t, uint16_t;int32_t, uint32_t;int64_t, uint64_t;intptr_t, uintptr_t;size_t;ssize_t;ptrdiff_t".split(";");
function G(e){function b(){if(c>=k)throw"Unexpected end of input";for(var a,g=e.substr(c),f=3,h=D.length;f<h;f+=4)if(null!==(a=g.match(D[f-3]))){var m=D[f-2],h=D[f-1],f=D[f],g=a[0];c+=g.length;h=null!==h?h(g):g;if(null===m)return f(h);var q="";null!==(a=e.substr(c).match(m))&&(q=a[0],c+=q.length);return f(h,q,g+q)}for(a=3;0<a;--a)if(c+a<=k&&(m=e.substr(c,a),f=B[m],void 0!==f))return c+=a,f(m);switch(m){case ")":case "]":return++c,{a:m};case "(":++c;if((a=d())&&"sym"===a.a&&(-1!==E.indexOf(a.left)||
-1!==F.indexOf(a.left))){a=[];for(f=m=!1;;)if(g=b(),g!==z){if(")"===g.a)break;if("op_b"===g.a&&"*"===g.f){if(!1===f)throw"* in typecast before any type";a.push("*");m=!0}else if("sym"===g.a&&-1!==E.indexOf(g.left)){if(!0===f)throw"Typecast qualifier after a type";if(!0===m)throw"Typecast qualifier after a *";a.push(g.left);seen_qualifier=!0}else if("sym"===g.a&&-1!==F.indexOf(g.left)){if(!0===f)throw"Typecast type after another type";if(!0===m)throw"Typecast type after a *";a.push(g.left);f=!0}else throw"Unexpected non-typey symbol in typecast: "+
g.a;}return v(a.join(" "))}return{a:"_paren",i:2,g:function(a,b){var c=null;")"!==b.c.a&&(c=b.e(l,b));if(")"!==b.c.a)throw"Unmatched left parenthesis";b.advance();return{a:"fun",i:2,b:2,d:"left",left:a,right:c}},h:function(a){if(")"===a.c.a)throw"Empty parentheses expression";var b=a.e(l,a);if(")"!==a.c.a)throw"Unmatched left parenthesis";a.advance();return b}};case "[":return++c,{a:"op_b[]",i:2,d:"left",g:function(a,b){this.b=2;if("]"===b.c.a)throw"Empty subscript";var c=b.e(l,b);if("]"!==b.c.a)throw"Unmatched left bracket";
b.advance();this.left=a;this.right=c;return this},h:p};case ":":return++c,{a:":"};case "?":return++c,{a:"op_t",f:"?:",d:"right",i:15,g:function(a,b){this.b=15;this.left=a;this.l=b.e(l-1,b);if(":"!==b.c.a)throw"Unmatched : for ?.";b.advance();this.right=b.e(l-1,b);return this},h:p}}throw"Failed in lexing input: "+e.substr(c);}function d(){for(var a=c;c<k;){var d=b();if(d!==z)return c=a,d}c=a;return null}var c=0,k=e.length;this.k=function(){for(;c<k;){var a=b();if(a!==z)return a}return null}}
function H(e){var b={i:l,a:"end"},d={c:b,j:function(){return this.c===b},advance:function(){var c=e.k();this.c=null===c?b:c},e:function(b,a){if(a.j())return null;var c=a.c;a.advance();for(var d=c.h(a);b>a.c.i;)c=a.c,a.advance(),d=c.g(d,a);return d}};d.advance();var c=d.e(l-1,d);if(!d.j())throw"Trailing token: "+d.c.a;return c}try{exports.CLexer=G,exports.build_ast=H}catch(I){};/*
 (c) 2014 dean@gmail.com http://github.com/deanm/omgc */
function J(e,b,d,c,k,a){function g(){-1!==m&&a.push({type:"",text:"(",opt:0===m})}function f(){-1!==m&&a.push({type:"",text:")",opt:0===m})}if(null===d)throw"Operator missing operand?";var h=d.a,m=k.n(e,b,d,c);++e;switch(h){case "num":h=d.o;b="flt"===d.m?"floating point number":"integer number";a.push({type:"num",desc:b,text:h});break;case "sym":a.push({type:"sym",desc:"identifier",text:d.left});break;case "fun":c=[null,null,null,null];b="binary operator function call";var q={type:"op_u",text:"(",
desc:b,p:c};b={type:"op_u",text:")",desc:b,p:c};c[0]=a.length;h=J(e,"left",d.left,d,k,a);c[1]=a.length;a.push(q);c[2]=a.length;null!==d.right&&J(e,"fun",d.right,d,k,a);c[3]=a.length;a.push(b);f();break;case "op_b[]":g();c=[null,null,null,null];b="binary operator subscript";q={type:"op_u",text:"[",desc:b,p:c};b={type:"op_u",text:"]",desc:b,p:c};c[0]=a.length;h=J(e,"left",d.left,d,k,a);c[1]=a.length;a.push(q);c[2]=a.length;J(e,"subscript",d.right,d,k,a);c[3]=a.length;a.push(b);f();break;case "op_b_typecast":g();
c=[null,null,null,null];b="binary operator typecast";q={type:"op_u",text:"(",desc:b,p:c};b={type:"op_u",text:")",desc:b,p:c};a.push(q);c[0]=a.length;h=J(e,"left",d.left,d,k,a);c[1]=a.length;a.push(b);c[2]=a.length;J(e,"typecast",d.right,d,k,a);c[3]=a.length;f();break;case "op_u":case "op_u_s":b=d.d+" associative "+("op_u"===h?"prefix":"postfix")+" unary operator "+d.f;b={type:h,text:d.f,desc:b,p:[null,null]};g();"op_u"===h&&a.push(b);b.p[0]=a.length;J(e,"op_u"===h?"right":"left",d.left,d,k,a);b.p[1]=
a.length;"op_u_s"===h&&a.push(b);f();break;case "op_b":b=d.d+" associative binary operator "+d.f;g();c=h=" ";if("."===d.f||"->"===d.f)h=c="";","===d.f&&(h="");b={type:"op_b",text:h+d.f+c,desc:b,p:[null,null,null,null]};b.p[0]=a.length;J(e,"left",d.left,d,k,a);b.p[1]=a.length;a.push(b);b.p[2]=a.length;J(e,"right",d.right,d,k,a);b.p[3]=a.length;f();break;case "op_t":b="right associative ternary operator ?:";c=[null,null,null,null,null,null];q={type:"op_t",text:" ? ",desc:b,p:c};b={type:"op_t",text:" : ",
desc:b,p:c};g();c[0]=a.length;J(e,"left",d.left,d,k,a);c[1]=a.length;a.push(q);c[2]=a.length;J(e,"middle",d.l,d,k,a);c[3]=a.length;a.push(b);c[4]=a.length;J(e,"right",d.right,d,k,a);c[5]=a.length;f();break;default:throw"Internal error, unhandled node: "+d.a;}}function K(e){var b=[];J(0,"root",e,null,{n:function(b,c,e,a){return"fun"===c||0===b?-1:"subscript"===c||e.b<a.b||"right"===c&&"right"===a.d&&e.b<=a.b||"left"===c&&"left"===a.d&&e.b<=a.b?0:1}},b);return b}try{exports.generate_blocks=K}catch(L){};})(window)
