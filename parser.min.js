/*
 (c) 2014 dean@gmail.com */
var h=20;function m(b,c,d,a){return{a:c,f:a,c:function(a,d){if(0===c)throw"error in operator led";this.type="op_b"+b;this.left=a;this.right=d.b(c,d);return this},d:function(a){if(0===d)throw"error in operator nud";this.type="op_u"+b;this.left=a.b(d,a);return this}}}function p(b,c,d){return m(b,c,d,"left")}function r(b,c,d){return{type:"val_"+b,left:c,i:d,c:function(){throw"led called on a value token.";},d:function(){return this}}}function s(b,c){return r("int",b,c)}
function u(b,c){return r("flt",b,c)}function x(b){return{type:"fun",c:function(){throw"Internal error: led called on a function.";},d:function(c){this.left=b;this.right=c.b(2,c);return this}}}function y(b){return{type:"sym",left:b,c:function(){throw"Internal error: led called on a variable.";},d:function(){return this}}}function z(b){return{type:"typecast",c:function(){throw"Internal error: led called on a function.";},d:function(c){this.left=b;this.right=c.b(3,c);return this}}}
function A(b){function c(){var g=b[a];if(a+1<k){var e=g+b[a+1];if(a+2<k){var f=e+b[a+2];switch(f){case "<<=":case ">>=":return a+=3,m(f,16.1,0,"right")}}switch(e){case "->":return a+=2,p(e,2,0);case "<<":case ">>":return a+=2,p(e,7,0);case "<=":case ">=":return a+=2,p(e,8,0);case "==":case "!=":return a+=2,p(e,9,0);case "&&":return a+=2,p(e,13,0);case "||":return a+=2,p(e,14,0);case "+=":case "-=":case "*=":case "/=":case "%=":case "&=":case "^=":case "|=":return a+=2,p(e,16,0)}}switch(g){case ".":return++a,
p(g,2,0);case "!":case "~":return++a,p(g,0,3);case "*":return++a,p(g,5,3);case "/":case "%":return++a,p(g,5,0);case "+":case "-":return++a,p(g,6,3);case "&":return++a,p(g,10,3);case "^":return++a,p(g,11,0);case "|":return++a,p(g,12,0);case ")":case "]":return++a,{type:g,a:h,c:function(){throw"Internal error: led called on ')'";},d:function(){throw"Internal error: nud called on ')'";}};case "(":case "[":++a;e=d();if("("===g&&e&&"sym"===e.type&&(-1!==v.indexOf(e.left)||-1!==w.indexOf(e.left))){for(e=
[];;)if(f=c(),null!==f){if(")"===f.type)break;if("sym"!==f.type||-1===v.indexOf(f.left)&&-1===w.indexOf(f.left))throw"Unexpected non-typey symbol in typecast: "+f.left;e.push(f.left)}return z(e.join(" "))}return{type:g,a:80,c:function(){throw"Interal error, led called on "+g;},d:function(a){var c=a.b(h-1,a);if("("===g&&")"!==a.e().type||"["===g&&"]"!==a.e().type)throw"Unmatched left parenthesis/bracket.";a.advance();return c}};case "?":return++a,{type:"op_t?:",f:"right",a:15,c:function(a,c){this.left=
a;this.k=c.b(h-1,c);if(":"!==c.e().type)throw"Unmatched : for ?.";c.advance();this.right=c.b(h-1,c);return this},d:function(){throw"nud";}};case ":":return++a,{type:":"};case "=":return++a,m(g,16.1,0,"right");case ",":return++a,m(g,18.1,0,"right");case " ":case "\t":case "\r":case "\n":return++a,null}for(var f=3,n=l.length;f<n;f+=4)if(e=l[f-3],null!==(e=b.slice(a).match(e))){var n=l[f-2],D=l[f],t="",f=(0,l[f-1])(e[0]);a+=e[0].length;null!==(e=b.slice(a).match(n))&&(t=e[0],a+=t.length);return D(f,
t)}if(null!==(e=b.slice(a).match(q)))return f=e[0],a+=f.length,e=d(),(e&&"("===e.type?x:y)(f);throw"Failed in processing input: "+b.slice(a);}function d(){for(var b=a;a<k;){var d=c();if(null!==d)return a=b,d}a=b;return null}var a=0,k=b.length,q=/^[a-zA-Z_][a-zA-Z0-9_]*/,n=/^[uU][lL]?|[uU](?:ll|LL)|[lL][uU]?|(?:ll|LL)[uU]?/,l=[/^(?:[0-9]*\.[0-9]+|[0-9]+\.)(?:[eE][+-]?[0-9]+)?|^[0-9]+[eE][+-]?[0-9]+/,/^[fFlL]/,parseFloat,u,/^0[xX][0-9a-fA-F]+/,n,function(a){return parseInt(a,16)},s,/^0[0-7]*/,n,function(a){return parseInt(a,
8)},s,/^[1-9][0-9]*/,n,function(a){return parseInt(a,10)},s],v=["signed","unsigned","short","long"],w="bool;char;int;float;double;wchar_t;char16_t;char32_t;_Bool;float_t;double_t;int8_t, uint8_t;int16_t, uint16_t;int32_t, uint32_t;int64_t, uint64_t;intptr_t, uintptr_t;size_t;ssize_t;ptrdiff_t".split(";");this.l=function(){for(var b=[];a<k;){var d=c();null!==d&&b.push(d)}return b}}
function B(b){b={j:b,g:0,h:function(){return this.g>=this.j.length},e:function(){return this.h()?{a:h,type:"end"}:this.j[this.g]},advance:function(){++this.g},b:function(c,b){if(!b.h()){var a=b.e();b.advance();for(var k=a.d(b);c>b.e().a;)a=b.e(),b.advance(),k=a.c(k,b);return k}}};return b.b(h-1,b)}function C(b,c,d,a,k){var q=E(b+1,d,k);!0===k(b,c,d,a)&&(q="("+q+")");return q}
function E(b,c,d){if(void 0===c)throw"Error parsing input, probably invalid.";switch(c.type){case "val_int":return c.left+""+c.i;case "val_flt":return c.left.toExponential()+""+c.i;case "sym":return c.left;case "fun":return c.left+"("+C(b,"func",c.right,c,d)+")";case "typecast":return"(("+c.left+")"+C(b,"typecast",c.right,c,d)+")";case "op_t?:":return C(b,"left",c.left,c,d)+" ? "+C(b,"middle",c.k,c,d)+" : "+C(b,"right",c.right,c,d);default:if("op_u"===c.type.substr(0,4))return c.type.substr(4)+C(b,
"unary",c.left,c,d);if("op_b"===c.type.substr(0,4)){var a=" ",k=" ";"op_b->"===c.type&&(a=k="");"op_b,"===c.type&&(a="");return C(b,"left",c.left,c,d)+a+c.type.substr(4)+k+C(b,"right",c.right,c,d)}throw"Internal error, unhandled node: "+c.type+" "+c.value;}}
function F(b,c){function d(a,c,b){return"val_int"!==b.type&&"val_flt"!==b.type&&"sym"!==b.type}function a(a,c,b,l){return 0===a||!1===d(0,0,b)||b.a<l.a||"right"===c&&"right"===l.f&&b.a<=l.a||"left"===c&&"left"===l.f&&b.a<=l.a?!1:!0}return C(0,"root",b,null,c?a:d)}window.parse_c=function(b){b=B((new A(b)).l());console.log(JSON.stringify(b));return[F(b),F(b,!0)]};
