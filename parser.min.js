(function(exports){/*
 (c) 2014 dean@gmail.com http://github.com/deanm/omgc */
var k=20;function m(){throw"error, invalid led call";}function n(){throw"error, invalid nud call";}function q(e,d,b,c){return{a:"op_b",f:e,i:d,d:c,g:0===d?m:function(b,a){this.b=d;this.left=b;this.right=a.e(d+("right"===c?0.1:0),a);return this},h:0===b?n:function(c){this.a="op_u";this.b=b;this.d="right";this.left=c.e(b,c);return this}}}function s(e,d,b){return{a:"num",k:e,left:d,o:b,g:m,h:function(){return this}}}function t(e){return{a:"sym",left:e,g:m,h:function(){return this}}}
function u(e,d){return s("int",e,d)}function v(e){return{a:"op_b_typecast",b:3,d:"right",g:m,h:function(d){this.left=t(e);this.right=d.e(3.1,d);return this}}}function w(e,d){return function(b){return q(b,e,d,"left")}}function x(e,d){return function(b){return q(b,e,d,"right")}}function y(e){return function(d){return{a:"op_u",f:d,i:e,g:function(b){this.a+="_s";this.b=e;this.d="left";this.left=b;return this},h:function(b){this.d="right";this.b=3;this.left=b.e(3,b);return this}}}}var z={};
function A(){return function(){return z}}
var B={" ":A(),"\t":A(),"\r":A(),"\n":A(),"++":y(1),"--":y(2),".":w(2,0),"->":w(2,0),"!":x(0,3),"~":x(0,3),"*":w(5,3),"/":w(5,0),"%":w(5,0),"+":w(6,3),"-":w(6,3),"<<":w(7,0),">>":w(7,0),"<=":w(8,0),">=":w(8,0),"==":w(9,0),"!=":w(9,0),"&":w(10,3),"^":w(11,0),"|":w(12,0),"&&":w(13,0),"||":w(14,0),"=":x(16,0),"+=":x(16,0),"-=":x(16,0),"*=":x(16,0),"/=":x(16,0),"%=":x(16,0),"<<=":x(16,0),">>=":x(16,0),"&=":x(16,0),"^=":x(16,0),"|=":x(16,0),",":x(18,0)},C=/^[a-zA-Z_][a-zA-Z0-9_]*/,D=/^[uU][lL]?|[uU](?:ll|LL)|[lL][uU]?|(?:ll|LL)[uU]?/,
E=[/^(?:[0-9]*\.[0-9]+|[0-9]+\.)(?:[eE][+-]?[0-9]+)?|^[0-9]+[eE][+-]?[0-9]+/,/^[fFlL]/,parseFloat,function(e,d){return s("flt",e,d)},/^0[xX][0-9a-fA-F]+/,D,function(e){return parseInt(e,16)},u,/^0[0-7]*/,D,function(e){return parseInt(e,8)},u,/^[1-9][0-9]*/,D,function(e){return parseInt(e,10)},u],F=["signed","unsigned","short","long"],G="bool;char;int;float;double;wchar_t;char16_t;char32_t;_Bool;float_t;double_t;int8_t, uint8_t;int16_t, uint16_t;int32_t, uint32_t;int64_t, uint64_t;intptr_t, uintptr_t;size_t;ssize_t;ptrdiff_t".split(";");
function H(e){function d(){if(c>=h)throw"Unexpected end of input";for(var a,g=3;0<g;--g)if(c+g<=h){a=e.substr(c,g);var l=B[a];if(void 0!==l)return c+=g,l(a)}switch(a){case ")":case "]":return++c,{a:a};case "(":++c;if((a=b())&&"sym"===a.a&&(-1!==F.indexOf(a.left)||-1!==G.indexOf(a.left))){a=[];for(l=g=!1;;){var f=d();if(f!==z){if(")"===f.a)break;if("op_b"===f.a&&"*"===f.f){if(!1===l)throw"* in typecast before any type";a.push("*");g=!0}else if("sym"===f.a&&-1!==F.indexOf(f.left)){if(!0===l)throw"Typecast qualifier after a type";
if(!0===g)throw"Typecast qualifier after a *";a.push(f.left);seen_qualifier=!0}else if("sym"===f.a&&-1!==G.indexOf(f.left)){if(!0===l)throw"Typecast type after another type";if(!0===g)throw"Typecast type after a *";a.push(f.left);l=!0}else throw"Unexpected non-typey symbol in typecast: "+f.a;}}return v(a.join(" "))}return{a:"_paren",i:2,g:function(a,b){var c=null;")"!==b.c.a&&(c=b.e(k,b));if(")"!==b.c.a)throw"Unmatched left parenthesis";b.advance();return{a:"fun",i:2,b:2,d:"left",left:a,right:c}},
h:function(a){if(")"===a.c.a)throw"Empty parentheses expression";var b=a.e(k,a);if(")"!==a.c.a)throw"Unmatched left parenthesis";a.advance();return b}};case "[":return++c,{a:"op_b[]",i:2,d:"left",g:function(a,b){this.b=2;if("]"===b.c.a)throw"Empty subscript";var c=b.e(k,b);if("]"!==b.c.a)throw"Unmatched left bracket";b.advance();this.left=a;this.right=c;return this},h:n};case ":":return++c,{a:":"};case "?":return++c,{a:"op_t",f:"?:",d:"right",i:15,g:function(a,b){this.b=15;this.left=a;this.m=b.e(k-
1,b);if(":"!==b.c.a)throw"Unmatched : for ?.";b.advance();this.right=b.e(k-1,b);return this},h:n}}g=3;for(l=E.length;g<l;g+=4)if(a=E[g-3],null!==(a=e.slice(c).match(a))){var l=E[g-2],f=E[g],p="",g=(0,E[g-1])(a[0]);c+=a[0].length;null!==(a=e.slice(c).match(l))&&(p=a[0],c+=p.length);return f(g,p)}if(null!==(a=e.slice(c).match(C)))return a=a[0],c+=a.length,t(a);throw"Failed in processing input: "+e.slice(c);}function b(){for(var a=c;c<h;){var b=d();if(b!==z)return c=a,b}c=a;return null}var c=0,h=e.length;
this.l=function(){for(;c<h;){var a=d();if(a!==z)return a}return null}}function I(e){var d={i:k,a:"end"},b={c:d,j:function(){return this.c===d},advance:function(){var b=e.l();this.c=null===b?d:b},e:function(b,a){if(a.j())return null;var c=a.c;a.advance();for(var d=c.h(a);b>a.c.i;)c=a.c,a.advance(),d=c.g(d,a);return d}};b.advance();var c=b.e(k-1,b);if(!b.j())throw"Trailing token: "+b.c.a;return c}try{exports.CLexer=H,exports.build_ast=I}catch(J){};/*
 (c) 2014 dean@gmail.com http://github.com/deanm/omgc */
function K(e,d,b,c,h,a){function g(){-1!==p&&a.push({type:"",text:"(",opt:0===p})}function l(){-1!==p&&a.push({type:"",text:")",opt:0===p})}if(null===b)throw"Operator missing operand?";var f=b.a,p=h.n(e,d,b,c);++e;switch(f){case "num":f="flt"===b.k?(b.left|0)===b.left?b.left+".0":b.left.toExponential():b.left;d="flt"===b.k?"floating point number":"integer number";a.push({type:"num",desc:d,text:f});break;case "sym":a.push({type:"sym",desc:"identifier",text:b.left});break;case "fun":c=[null,null,null,
null];d="binary operator function call";var r={type:"op_u",text:"(",desc:d,p:c};d={type:"op_u",text:")",desc:d,p:c};c[0]=a.length;f=K(e,"left",b.left,b,h,a);c[1]=a.length;a.push(r);c[2]=a.length;null!==b.right&&K(e,"fun",b.right,b,h,a);c[3]=a.length;a.push(d);l();break;case "op_b[]":g();c=[null,null,null,null];d="binary operator subscript";r={type:"op_u",text:"[",desc:d,p:c};d={type:"op_u",text:"]",desc:d,p:c};c[0]=a.length;f=K(e,"left",b.left,b,h,a);c[1]=a.length;a.push(r);c[2]=a.length;K(e,"subscript",
b.right,b,h,a);c[3]=a.length;a.push(d);l();break;case "op_b_typecast":g();c=[null,null,null,null];d="binary operator typecast";r={type:"op_u",text:"(",desc:d,p:c};d={type:"op_u",text:")",desc:d,p:c};a.push(r);c[0]=a.length;f=K(e,"left",b.left,b,h,a);c[1]=a.length;a.push(d);c[2]=a.length;K(e,"typecast",b.right,b,h,a);c[3]=a.length;l();break;case "op_u":case "op_u_s":d=b.d+" associative "+("op_u"===f?"prefix":"postfix")+" unary operator "+b.f;d={type:f,text:b.f,desc:d,p:[null,null]};g();"op_u"===f&&
a.push(d);d.p[0]=a.length;K(e,"op_u"===f?"right":"left",b.left,b,h,a);d.p[1]=a.length;"op_u_s"===f&&a.push(d);l();break;case "op_b":d=b.d+" associative binary operator "+b.f;g();c=f=" ";if("."===b.f||"->"===b.f)f=c="";","===b.f&&(f="");d={type:"op_b",text:f+b.f+c,desc:d,p:[null,null,null,null]};d.p[0]=a.length;K(e,"left",b.left,b,h,a);d.p[1]=a.length;a.push(d);d.p[2]=a.length;K(e,"right",b.right,b,h,a);d.p[3]=a.length;l();break;case "op_t":d="right associative ternary operator ?:";c=[null,null,null,
null,null,null];r={type:"op_t",text:" ? ",desc:d,p:c};d={type:"op_t",text:" : ",desc:d,p:c};g();c[0]=a.length;K(e,"left",b.left,b,h,a);c[1]=a.length;a.push(r);c[2]=a.length;K(e,"middle",b.m,b,h,a);c[3]=a.length;a.push(d);c[4]=a.length;K(e,"right",b.right,b,h,a);c[5]=a.length;l();break;default:throw"Internal error, unhandled node: "+b.a;}}
function L(e){var d=[];K(0,"root",e,null,{n:function(b,c,d,a){return"fun"===c||0===b?-1:"subscript"===c||d.b<a.b||"right"===c&&"right"===a.d&&d.b<=a.b||"left"===c&&"left"===a.d&&d.b<=a.b?0:1}},d);return d}try{exports.generate_blocks=L}catch(M){};})(window)
