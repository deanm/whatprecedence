(function(exports){/*
 (c) 2014 dean@gmail.com http://github.com/deanm/omgc */
function k(){throw"error, invalid led call";}function n(){throw"error, invalid nud call";}function q(d,c,b,f){return{a:"op_b",e:d,l:c,d:f,h:0===c?k:function(b,a){this.c=c;this.b=b;this.j=a.g(c+("right"===f?0.1:0));return this},i:0===b?n:function(c){this.a="op_u";this.c=b;this.d="right";this.b=c.g(b);return this}}}
function r(){return{a:"op_u",e:"sizeof",d:"right",h:k,i:function(d){this.c=3;this.d="right";if("op_u_typecast"===d.f.a)this.b=d.f.b,d.k();else if(this.b=d.g(3),"typespec"===this.b.a)throw"Cannot use type in expression: "+this.b.b;return this}}}function s(d,c,b,f){return{a:"num",q:d,b:c,t:b,s:f,h:k,i:function(){return this}}}function t(d){return{a:"typespec",b:d,h:k,i:function(){return this}}}function u(d,c,b){return s("int",d,c,b)}
function v(d){return{a:"op_u_typecast",c:3,d:"right",h:k,b:t(d),i:function(c){this.j=c.g(3.1);return this}}}function w(d,c){return function(b){return q(b,d,c,"left")}}function x(d,c){return function(b){return q(b,d,c,"right")}}function y(d){return function(c){return{a:"op_u",e:c,l:d,h:function(b){this.a+="_s";this.c=d;this.d="left";this.b=b;return this},i:function(b){this.d="right";this.c=3;this.b=b.g(3);return this}}}}var z={};function A(){return function(){return z}}
var B={" ":A(),"\t":A(),"\r":A(),"\n":A(),"++":y(1),"--":y(2),".":w(2,0),"->":w(2,0),"!":x(0,3),"~":x(0,3),"*":w(5,3),"/":w(5,0),"%":w(5,0),"+":w(6,3),"-":w(6,3),"<<":w(7,0),">>":w(7,0),"<=":w(8,0),">=":w(8,0),"==":w(9,0),"!=":w(9,0),"&":w(10,3),"^":w(11,0),"|":w(12,0),"&&":w(13,0),"||":w(14,0),"=":x(16,0),"+=":x(16,0),"-=":x(16,0),"*=":x(16,0),"/=":x(16,0),"%=":x(16,0),"<<=":x(16,0),">>=":x(16,0),"&=":x(16,0),"^=":x(16,0),"|=":x(16,0),",":w(18,0)},C=/^[uU](?:ll|LL)|^[uU][lL]?|^(?:ll|LL)[uU]?|^[lL][uU]?/,
D=[/^(?:[0-9]*\.[0-9]+|[0-9]+\.)(?:[eE][+-]?[0-9]+)?|^[0-9]+[eE][+-]?[0-9]+/,/^[fFlL]/,parseFloat,function(d,c,b){return s("flt",d,c,b)},/^0[xX][0-9a-fA-F]+/,C,function(d){return parseInt(d,16)},u,/^0[0-7]*/,C,function(d){return parseInt(d,8)},u,/^[1-9][0-9]*/,C,function(d){return parseInt(d,10)},u,/^[a-zA-Z_][a-zA-Z0-9_]*/,null,null,function(d){return{a:"sym",b:d,h:k,i:function(){return this}}}],E=["signed","unsigned","short","long"],F="void;char;int;float;double;_Bool;wchar_t;char16_t;char32_t;float_t;double_t;int8_t, uint8_t;int16_t, uint16_t;int32_t, uint32_t;int64_t, uint64_t;intptr_t, uintptr_t;size_t;ssize_t;ptrdiff_t".split(";");
function G(d){function c(){if(f>=l)throw"Unexpected end of input";for(var a,g=d.substr(f),h=3,e=D.length;h<e;h+=4)if(null!==(a=g.match(D[h-3]))){var m=D[h-2],e=D[h-1],h=D[h],g=a[0];f+=g.length;e=null!==e?e(g):g;if(null===m)return"sizeof"===e?r():-1!==E.indexOf(e)||-1!==F.indexOf(e)?t(e):h(e);var p="";null!==(a=d.substr(f).match(m))&&(p=a[0],f+=p.length);return h(e,p,g+p)}for(a=3;0<a;--a)if(f+a<=l&&(m=d.substr(f,a),h=B[m],void 0!==h))return f+=a,h(m);switch(m){case ")":case "]":return++f,{a:m};case "(":++f;
if((a=b())&&"typespec"===a.a){a=[];for(h=m=!1;;)if(g=c(),g!==z){if(")"===g.a)break;if("op_b"===g.a&&"*"===g.e){if(!1===h)throw"* in typecast before any type";a.push("*");m=!0}else if("typespec"===g.a&&-1!==E.indexOf(g.b)){if(!0===h)throw"Typecast qualifier after a type";if(!0===m)throw"Typecast qualifier after a *";a.push(g.b);seen_qualifier=!0}else if("typespec"===g.a&&-1!==F.indexOf(g.b)){if(!0===h)throw"Typecast type after another type";if(!0===m)throw"Typecast type after a *";a.push(g.b);h=!0}else throw"Unexpected non-typey symbol in typecast: "+
g.a;}return v(a.join(" "))}return{a:"_paren",l:2,h:function(a,b){var c=null;")"!==b.f.a&&(c=b.g(20));if(")"!==b.k())throw"Unmatched left parenthesis";return{a:"fun",l:2,c:2,d:"left",b:a,j:c}},i:function(a){if(")"===a.f.a)throw"Empty parentheses expression";var b=a.g(20);if(")"!==a.k())throw"Unmatched left parenthesis";return b}};case "[":return++f,{a:"op_b[]",l:2,d:"left",h:function(a,b){this.c=2;if("]"===b.f.a)throw"Empty subscript";var c=b.g(20);if("]"!==b.k())throw"Unmatched left bracket";this.b=
a;this.j=c;return this},i:n};case ":":return++f,{a:":"};case "?":return++f,{a:"op_t",e:"?:",d:"right",l:15,h:function(a,b){this.c=15;this.b=a;this.o=b.g(15.1);if(":"!==b.k())throw"Unmatched : for ?.";this.j=b.g(15.1);return this},i:n}}throw"Failed in lexing input: "+d.substr(f);}function b(){for(var a=f;f<l;){var b=c();if(b!==z)return f=a,b}f=a;return null}var f=0,l=d.length;this.n=function(){for(;f<l;){var a=c();if(a!==z)return a}return null}}
function H(d){var c={l:20,a:"end"};this.f=c;this.m=function(){return this.f===c};this.k=function(){var b=this.f.a,f=d.n();this.f=null===f?c:f;return b};this.g=function(b){if(this.m())return null;var c=this.f;this.k();for(var d=c.i(this);b>this.f.l;)c=this.f,this.k(),d=c.h(d,this);return d};this.k()}function I(d){d=new H(d);var c=d.g(19);if(!d.m())throw"Trailing token: "+d.f.a;return c}try{exports.CLexer=G,exports.build_ast=I}catch(J){};/*
 (c) 2014 dean@gmail.com http://github.com/deanm/omgc */
function K(d,c,b,f,l,a){function g(){-1!==m&&a.push({type:"",text:"(",opt:0===m})}function h(){-1!==m&&a.push({type:"",text:")",opt:0===m})}if(null===b)throw"Operator missing operand?";var e=b.a,m=l.r(d,c,b,f);++d;switch(e){case "num":f=b.s;c="flt"===b.q?"floating point number":"integer number";a.push({type:"num",desc:c,text:f});break;case "sym":a.push({type:"sym",desc:"identifier",text:b.b});break;case "typespec":if("op_u"!==f.a||"sizeof"!==f.e)throw"Cannot use type in expression: "+b.b;a.push({type:"",
text:"("});a.push({type:"typespec",desc:"type",text:b.b});a.push({type:"",text:")"});break;case "fun":e=[null,null,null,null];c="binary operator function call";var p={type:"op_u",text:"(",desc:c,p:e};c={type:"op_u",text:")",desc:c,p:e};g();e[0]=a.length;f=K(d,"left",b.b,b,l,a);e[1]=a.length;a.push(p);e[2]=a.length;null!==b.j&&K(d,"fun",b.j,b,l,a);e[3]=a.length;a.push(c);h();break;case "op_b[]":g();e=[null,null,null,null];c="binary operator subscript";p={type:"op_u",text:"[",desc:c,p:e};c={type:"op_u",
text:"]",desc:c,p:e};e[0]=a.length;f=K(d,"left",b.b,b,l,a);e[1]=a.length;a.push(p);e[2]=a.length;K(d,"subscript",b.j,b,l,a);e[3]=a.length;a.push(c);h();break;case "op_u_typecast":if("typespec"!==b.b.a)throw"Typecast's left is not a typespec node";g();e=[null,null,null,null];f="("+b.b.b+")";p={type:"op_u",text:f,desc:"unary operator typecast",p:e};e[0]=a.length;a.push(p);e[1]=a.length;e[2]=a.length;K(d,"typecast",b.j,b,l,a);e[3]=a.length;h();break;case "op_u":case "op_u_s":c=b.d+" associative "+("op_u"===
e?"prefix":"postfix")+" unary operator "+b.e;f=b.e;"sizeof"===f&&(f+=" ");c={type:e,text:f,desc:c,p:[null,null]};g();"op_u"===e&&a.push(c);c.p[0]=a.length;K(d,"op_u"===e?"right":"left",b.b,b,l,a);c.p[1]=a.length;"op_u_s"===e&&a.push(c);h();break;case "op_b":c=b.d+" associative binary operator "+b.e;g();f=e=" ";if("."===b.e||"->"===b.e)e=f="";","===b.e&&(e="");c={type:"op_b",text:e+b.e+f,desc:c,p:[null,null,null,null]};c.p[0]=a.length;K(d,"left",b.b,b,l,a);c.p[1]=a.length;a.push(c);c.p[2]=a.length;
K(d,"right",b.j,b,l,a);c.p[3]=a.length;h();break;case "op_t":c="right associative ternary operator ?:";e=[null,null,null,null,null,null];p={type:"op_t",text:" ? ",desc:c,p:e};c={type:"op_t",text:" : ",desc:c,p:e};g();e[0]=a.length;K(d,"left",b.b,b,l,a);e[1]=a.length;a.push(p);e[2]=a.length;K(d,"middle",b.o,b,l,a);e[3]=a.length;a.push(c);e[4]=a.length;K(d,"right",b.j,b,l,a);e[5]=a.length;h();break;default:throw"Unknown node: "+b.a;}}
function L(d){var c=[];K(0,"root",d,null,{r:function(b,c,d,a){return"fun"===c||0===b?-1:"subscript"===c?0:"op_b"===a.a&&","===a.e?-1:d.c<a.c||"right"===c&&"right"===a.d&&d.c<=a.c||"left"===c&&"left"===a.d&&d.c<=a.c?0:1}},c);return c}try{exports.generate_blocks=L}catch(M){};})(window)
