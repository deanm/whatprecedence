(function(exports){/*
 (c) 2014 dean@gmail.com http://github.com/deanm/omgc */
function k(){throw"error, invalid led call";}function n(){throw"error, invalid nud call";}function p(e,c,d,b){return{a:"op_b",e:e,l:c,d:b,i:0===c?k:function(d,a){this.c=c;this.b=d;this.g=a.f(c+("right"===b?0.1:0));return this},j:0===d?n:function(b){this.a="op_u";this.c=d;this.d="right";this.b=b.f(d);return this}}}function r(e,c,d,b){return{a:"num",q:e,b:c,t:d,s:b,i:k,j:function(){return this}}}function s(e){return{a:"sym",b:e,i:k,j:function(){return this}}}
function t(e,c,d){return r("int",e,c,d)}function u(e){return{a:"op_b_typecast",c:3,d:"right",i:k,j:function(c){this.b=s(e);this.g=c.f(3.1);return this}}}function v(e,c){return function(d){return p(d,e,c,"left")}}function w(e,c){return function(d){return p(d,e,c,"right")}}function x(e){return function(c){return{a:"op_u",e:c,l:e,i:function(c){this.a+="_s";this.c=e;this.d="left";this.b=c;return this},j:function(c){this.d="right";this.c=3;this.b=c.f(3);return this}}}}var y={};
function z(){return function(){return y}}
var A={" ":z(),"\t":z(),"\r":z(),"\n":z(),"++":x(1),"--":x(2),".":v(2,0),"->":v(2,0),"!":w(0,3),"~":w(0,3),"*":v(5,3),"/":v(5,0),"%":v(5,0),"+":v(6,3),"-":v(6,3),"<<":v(7,0),">>":v(7,0),"<=":v(8,0),">=":v(8,0),"==":v(9,0),"!=":v(9,0),"&":v(10,3),"^":v(11,0),"|":v(12,0),"&&":v(13,0),"||":v(14,0),"=":w(16,0),"+=":w(16,0),"-=":w(16,0),"*=":w(16,0),"/=":w(16,0),"%=":w(16,0),"<<=":w(16,0),">>=":w(16,0),"&=":w(16,0),"^=":w(16,0),"|=":w(16,0),",":v(18,0)},B=/^[uU](?:ll|LL)|^[uU][lL]?|^(?:ll|LL)[uU]?|^[lL][uU]?/,C=
[/^(?:[0-9]*\.[0-9]+|[0-9]+\.)(?:[eE][+-]?[0-9]+)?|^[0-9]+[eE][+-]?[0-9]+/,/^[fFlL]/,parseFloat,function(e,c,d){return r("flt",e,c,d)},/^0[xX][0-9a-fA-F]+/,B,function(e){return parseInt(e,16)},t,/^0[0-7]*/,B,function(e){return parseInt(e,8)},t,/^[1-9][0-9]*/,B,function(e){return parseInt(e,10)},t,/^[a-zA-Z_][a-zA-Z0-9_]*/,null,null,s],D=["signed","unsigned","short","long"],E="bool;char;int;float;double;void;wchar_t;char16_t;char32_t;_Bool;float_t;double_t;int8_t, uint8_t;int16_t, uint16_t;int32_t, uint32_t;int64_t, uint64_t;intptr_t, uintptr_t;size_t;ssize_t;ptrdiff_t".split(";");
function F(e){function c(){if(b>=l)throw"Unexpected end of input";for(var a,f=e.substr(b),g=3,h=C.length;g<h;g+=4)if(null!==(a=f.match(C[g-3]))){var m=C[g-2],h=C[g-1],g=C[g],f=a[0];b+=f.length;h=null!==h?h(f):f;if(null===m)return g(h);var q="";null!==(a=e.substr(b).match(m))&&(q=a[0],b+=q.length);return g(h,q,f+q)}for(a=3;0<a;--a)if(b+a<=l&&(m=e.substr(b,a),g=A[m],void 0!==g))return b+=a,g(m);switch(m){case ")":case "]":return++b,{a:m};case "(":++b;if((a=d())&&"sym"===a.a&&(-1!==D.indexOf(a.b)||-1!==
E.indexOf(a.b))){a=[];for(g=m=!1;;)if(f=c(),f!==y){if(")"===f.a)break;if("op_b"===f.a&&"*"===f.e){if(!1===g)throw"* in typecast before any type";a.push("*");m=!0}else if("sym"===f.a&&-1!==D.indexOf(f.b)){if(!0===g)throw"Typecast qualifier after a type";if(!0===m)throw"Typecast qualifier after a *";a.push(f.b);seen_qualifier=!0}else if("sym"===f.a&&-1!==E.indexOf(f.b)){if(!0===g)throw"Typecast type after another type";if(!0===m)throw"Typecast type after a *";a.push(f.b);g=!0}else throw"Unexpected non-typey symbol in typecast: "+
f.a;}return u(a.join(" "))}return{a:"_paren",l:2,i:function(a,b){var c=null;")"!==b.h.a&&(c=b.f(20));if(")"!==b.k())throw"Unmatched left parenthesis";return{a:"fun",l:2,c:2,d:"left",b:a,g:c}},j:function(a){if(")"===a.h.a)throw"Empty parentheses expression";var b=a.f(20);if(")"!==a.k())throw"Unmatched left parenthesis";return b}};case "[":return++b,{a:"op_b[]",l:2,d:"left",i:function(a,b){this.c=2;if("]"===b.h.a)throw"Empty subscript";var c=b.f(20);if("]"!==b.k())throw"Unmatched left bracket";this.b=
a;this.g=c;return this},j:n};case ":":return++b,{a:":"};case "?":return++b,{a:"op_t",e:"?:",d:"right",l:15,i:function(a,b){this.c=15;this.b=a;this.o=b.f(15.1);if(":"!==b.k())throw"Unmatched : for ?.";this.g=b.f(15.1);return this},j:n}}throw"Failed in lexing input: "+e.substr(b);}function d(){for(var a=b;b<l;){var d=c();if(d!==y)return b=a,d}b=a;return null}var b=0,l=e.length;this.n=function(){for(;b<l;){var a=c();if(a!==y)return a}return null}}
function G(e){var c={l:20,a:"end"};this.h=c;this.m=function(){return this.h===c};this.k=function(){var d=this.h.a,b=e.n();this.h=null===b?c:b;return d};this.f=function(c){if(this.m())return null;var b=this.h;this.k();for(var e=b.j(this);c>this.h.l;)b=this.h,this.k(),e=b.i(e,this);return e};this.k()}function H(e){e=new G(e);var c=e.f(19);if(!e.m())throw"Trailing token: "+e.h.a;return c}try{exports.CLexer=F,exports.build_ast=H}catch(I){};/*
 (c) 2014 dean@gmail.com http://github.com/deanm/omgc */
function J(e,c,d,b,l,a){function f(){-1!==m&&a.push({type:"",text:"(",opt:0===m})}function g(){-1!==m&&a.push({type:"",text:")",opt:0===m})}if(null===d)throw"Operator missing operand?";var h=d.a,m=l.r(e,c,d,b);++e;switch(h){case "num":h=d.s;c="flt"===d.q?"floating point number":"integer number";a.push({type:"num",desc:c,text:h});break;case "sym":a.push({type:"sym",desc:"identifier",text:d.b});break;case "fun":b=[null,null,null,null];c="binary operator function call";var q={type:"op_u",text:"(",desc:c,
p:b};c={type:"op_u",text:")",desc:c,p:b};f();b[0]=a.length;h=J(e,"left",d.b,d,l,a);b[1]=a.length;a.push(q);b[2]=a.length;null!==d.g&&J(e,"fun",d.g,d,l,a);b[3]=a.length;a.push(c);g();break;case "op_b[]":f();b=[null,null,null,null];c="binary operator subscript";q={type:"op_u",text:"[",desc:c,p:b};c={type:"op_u",text:"]",desc:c,p:b};b[0]=a.length;h=J(e,"left",d.b,d,l,a);b[1]=a.length;a.push(q);b[2]=a.length;J(e,"subscript",d.g,d,l,a);b[3]=a.length;a.push(c);g();break;case "op_b_typecast":f();b=[null,
null,null,null];c="binary operator typecast";q={type:"op_u",text:"(",desc:c,p:b};c={type:"op_u",text:")",desc:c,p:b};a.push(q);b[0]=a.length;h=J(e,"left",d.b,d,l,a);b[1]=a.length;a.push(c);b[2]=a.length;J(e,"typecast",d.g,d,l,a);b[3]=a.length;g();break;case "op_u":case "op_u_s":c=d.d+" associative "+("op_u"===h?"prefix":"postfix")+" unary operator "+d.e;c={type:h,text:d.e,desc:c,p:[null,null]};f();"op_u"===h&&a.push(c);c.p[0]=a.length;J(e,"op_u"===h?"right":"left",d.b,d,l,a);c.p[1]=a.length;"op_u_s"===
h&&a.push(c);g();break;case "op_b":c=d.d+" associative binary operator "+d.e;f();b=h=" ";if("."===d.e||"->"===d.e)h=b="";","===d.e&&(h="");c={type:"op_b",text:h+d.e+b,desc:c,p:[null,null,null,null]};c.p[0]=a.length;J(e,"left",d.b,d,l,a);c.p[1]=a.length;a.push(c);c.p[2]=a.length;J(e,"right",d.g,d,l,a);c.p[3]=a.length;g();break;case "op_t":c="right associative ternary operator ?:";b=[null,null,null,null,null,null];q={type:"op_t",text:" ? ",desc:c,p:b};c={type:"op_t",text:" : ",desc:c,p:b};f();b[0]=
a.length;J(e,"left",d.b,d,l,a);b[1]=a.length;a.push(q);b[2]=a.length;J(e,"middle",d.o,d,l,a);b[3]=a.length;a.push(c);b[4]=a.length;J(e,"right",d.g,d,l,a);b[5]=a.length;g();break;default:throw"Internal error, unhandled node: "+d.a;}}function K(e){var c=[];J(0,"root",e,null,{r:function(c,b,e,a){return"fun"===b||0===c?-1:"subscript"===b?0:"op_b"===a.a&&","===a.e?-1:e.c<a.c||"right"===b&&"right"===a.d&&e.c<=a.c||"left"===b&&"left"===a.d&&e.c<=a.c?0:1}},c);return c}try{exports.generate_blocks=K}catch(L){};})(window)
